<main>
    <section class="ps-search-bar navbar navbar-default">
        <div class="container-fluid">
            <form class="ps-search navbar-form navbar-left" ng-submit="doSearch()">
                <input type="search" class="form-control" ng-model="searchText" placeholder="{{ 'search_text' | translate }}"/>
                <input type="submit" class="btn btn-default" value="{{ 'search_text' | translate }}">
            </form>

            <ui class="nav navbar-nav">
                <li ng-class="{ active:videoTabSelected() }"><a href ng-click="showVideos()">{{ "videos_text" | translate }} <span class="badge ps-badge" ng-show="numVideos()>0">{{numVideos()}}</span></a></li>
                <li ng-class="{ active:channelTabSelected() }"><a href ng-click="showChannels()">{{ "channels_text" | translate }} <span class="badge ps-badge" ng-show="numChannels()>0">{{numChannels()}}</span></a></li>
                <li ng-show="numMyVideos()>0" ng-class="{ active:myVideosTabSelected() }"><a href ng-click="showMyVideos()">{{ "myvideos_text" | translate }} <span class="badge ps-badge" ng-show="numMyVideos()>0">{{numMyVideos()}}</span></a></li>
            </ui>

            <ui class="nav navbar-nav pull-right">
                <li>
                    <div class="ps-search-bar-container" dropdown is-open="status.isopen">
                        <button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle ng-disabled="disabled">
                            {{ "sort" | translate }} <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                            <li><a href="" ng-click="sortDefault()">{{ "sort_default" | translate }}</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="" ng-click="sortName()">{{ "sort_name" | translate }}</a></li>
                            <li><a href="" ng-click="sortDate()">{{ "sort_date" | translate }}</a></li>
                        </ul>
                    </div>
                </li>
            </ui>
        </div>
    </section>
    <section class="ps-current-channel" ng-show="channelData">
        <h1>
            {{channelData.title}}
            <span class="ps-header-link dropdown" dropdown on-toggle="loadChannelParents(channelId)" ng-show="channelId">
              <a href class="dropdown-toggle" dropdown-toggle>
                  {{ "parent_channels_text" | translate }}
              </a>
              <ul class="dropdown-menu">
                  <li ng-repeat="parent in parents" ng-show="parent._id!='default'">
                      <a href ng-href="#/catalog/channel/{{parent._id}}">{{parent.title}}</a>
                  </li>
              </ul>
            </span>
        </h1>
    </section>
    <section class="ps-current-channel" ng-hide="channelId">
        <h1>
            {{ "featured_videos_text" | translate }}
            <span class="ps-video-counter pull-right" ng-show="totalVideos">{{totalVideos}} {{ "available_videos_text" | translate }}</span>
        </h1>

    </section>

    <section class="ps-loader-container col-xs-offset-4 col-xs-4" ng-show="loading">
        <span class="ps-loader"></span>
    </section>

    <section class="ps-channel-list row" ng-show="channelTabSelected()">
     <!--   <pagination total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()"></pagination> -->
        <div class="col-md-6 col-xs-12" ng-repeat="channel in channels">
            <span class="dropdown ps-item-menu" dropdown on-toggle="loadChannelParents(channel._id)">
                <button class="glyphicon glyphicon-option-horizontal dropdown-toggle" dropdown-toggle>
                    <!--Listado de canales que incluyen este recurso-->
                </button>
                <ul class="dropdown-menu">
                    <li><p>{{ "parent_channels_text" | translate }}:</p></li>
                    <li class="divider"></li>
                    <li ng-repeat="parent in parents" ng-show="parent._id!='default'" ng-class="{ disabled:parent._id==channelId }">
                        <a href ng-href="#/catalog/channel/{{parent._id}}">{{parent.title}}</a>
                    </li>
                </ul>
            </span>
            <a class="ps-list-item ps-channel" ng-href="#/catalog/channel/{{channel._id}}" ng-class="{ 'ps-hidden':channel.hidden || video.hiddenInSearches }">
                <div class="ps-view">
                    <h2 class="ps-title pull-left">
                        {{channel.title}}
                        <p class="ps-date">{{channel.creationDate | date:"dd/MM/yyyy" }}</p>
                        <p class="ps-author">{{ownerName(channel)}}</p>
                    </h2>
                    <img class="pm-image img-responsive pull-right hidden-xs" ng-src="{{thumbnail(channel)}}" alt="{{channel.title + ' image'}}"/>
                </div>
                <div class="ps-edit text-right hidden-xs">
                    <!--
                    <button class="btn">Delete</button>
                    <button class="btn">Move Up</button>
                    <button class="btn">Move Down</button>
                    <button class="btn">Channels</button>
                    <button class="btn">Edit</button>
                    -->
                </div>
            </a>
        </div>
    </section>
    <section class="ps-video-list row" ng-show="videoTabSelected()">
        <div class="col-md-3 col-sm-4 col-xs-12" ng-repeat="video in videos">
            <span class="dropdown ps-item-menu" dropdown on-toggle="loadVideoParents(video._id)">
                <button class="glyphicon glyphicon-option-horizontal dropdown-toggle" dropdown-toggle>
                    <!--Listado de canales que incluyen este recurso-->
                </button>
                <ul class="dropdown-menu">
                    <li><p>{{ "parent_channels_text" | translate }}:</p></li>
                    <li class="divider"></li>
                    <li ng-repeat="parent in parents" ng-show="parent._id!='default'" ng-class="{ disabled:parent._id==channelId }">
                        <a href ng-href="#/catalog/channel/{{parent._id}}">{{parent.title}}</a>
                    </li>
                </ul>
            </span>
            <article class="ps-list-item ps-video" ng-click="openVideo(video)"  ng-class="{ 'ps-hidden':video.hidden || video.hiddenInSearches }">

                    <img class="ps-image img-responsive" ng-src="{{thumbnail(video)}}" alt="{{video.title + ' image'}}"/>
                    <h2 class="ps-title text-center">
                        {{video.title}}
                        <br/>
                        <em class="ps-date">{{video.creationDate | date:"dd/MM/yyyy" }}</em>
                        <em class="ps-author">{{ownerName(video)}}</em>
                    </h2>

                <!--
                <div class="ps-edit text-right hidden-xs">

                    <button class="btn">Delete</button>
                    <button class="btn">Move Up</button>
                    <button class="btn">Move Down</button>
                    <button class="btn">Channels</button>
                    <button class="btn">Edit</button>

                </div>-->
            </article>
        </div>
    </section>

    <section class="ps-video-list row" ng-show="myVideosTabSelected()">
        <div class="col-md-3 col-sm-4 col-xs-12" ng-repeat="video in myVideos">
            <span class="dropdown ps-item-menu" dropdown on-toggle="loadVideoParents(video._id)">
                <button class="glyphicon glyphicon-option-horizontal dropdown-toggle" dropdown-toggle>
                    <!--Listado de canales que incluyen este recurso-->
                </button>
                <ul class="dropdown-menu">
                    <li><p>{{ "parent_channels_text" | translate }}:</p></li>
                    <li class="divider"></li>
                    <li ng-repeat="parent in parents" ng-show="parent._id!='default'" ng-class="{ disabled:parent._id==channelId }">
                        <a href ng-href="#/catalog/channel/{{parent._id}}">{{parent.title}}</a>
                    </li>
                </ul>
            </span>
            <article class="ps-list-item ps-video" ng-click="openVideo(video)"  ng-class="{ 'ps-hidden':video.hidden || video.hiddenInSearches }">

                <img class="ps-image img-responsive" ng-src="{{thumbnail(video)}}" alt="{{video.title + ' image'}}"/>
                <h2 class="ps-title text-center">
                    {{video.title}}
                    <br/>
                    <em class="ps-date">{{video.creationDate | date:"dd/MM/yyyy" }}</em>
                    <em class="ps-author">{{ownerName(video)}}</em>
                </h2>

                <!--
                <div class="ps-edit text-right hidden-xs">

                    <button class="btn">Delete</button>
                    <button class="btn">Move Up</button>
                    <button class="btn">Move Down</button>
                    <button class="btn">Channels</button>
                    <button class="btn">Edit</button>

                </div>-->
            </article>
        </div>
    </section>
</main>
